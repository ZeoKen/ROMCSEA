UIModelCameraTrans = {
  Role = {
    position = Vector3(1.28, 1.18, -2.34),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 45
  },
  Item = {
    position = Vector3(0.8, 0.57, -1.5),
    rotation = Quaternion.Euler(7.119995, -28.5, -0.8000488),
    fieldOfView = 61
  },
  Team = {
    position = Vector3(1.06, 1.12, -1.93),
    rotation = Quaternion.Euler(7.119996, -28.5, -0.8000793),
    fieldOfView = 61
  },
  Raid = {
    position = Vector3(0.28, 1.5, -1.8),
    rotation = Quaternion.Euler(5, -10, 0),
    fieldOfView = 45
  },
  Furniture = {
    position = Vector3(0.8, 0.9, -1.5),
    rotation = Quaternion.Euler(7.119995, -28.5, -0.8000488),
    fieldOfView = 61
  },
  BattlePassRank = {
    position = Vector3(1.06, 1.12, -1.93),
    rotation = Quaternion.Euler(7.119996, -28.5, -0.8000793),
    fieldOfView = 53,
    rect = Rect(0.2, 0, 0.6, 1),
    backPosition = Vector3(-3.627448, -0.1070859, 6.703192),
    backScale = Vector3(6, 10, 10)
  },
  ChooseBranch = {
    position = Vector3(1.06, 1.12, -1.93),
    rotation = Quaternion.Euler(7.119996, -28.5, -0.8000793),
    fieldOfView = 53
  },
  Mercenary = {
    position = Vector3(1.35, -0.12, -6.3),
    rotation = Quaternion.Euler(6.9, -28.5, 0),
    fieldOfView = 45,
    backPosition = Vector3(-1.3, 0.1, 1),
    backScale = Vector3(16, 9, 1)
  },
  Boki = {
    position = Vector3(1.35, -0.12, -6.3),
    rotation = Quaternion.Euler(6.9, -28.5, 0),
    orthographic = true,
    orthographicSize = 0.8,
    backPosition = Vector3(-1.3, 0.1, 1),
    backScale = Vector3(16, 9, 1)
  },
  SignInCat = {
    position = Vector3(0, 1.2, 0),
    rotation = Quaternion.Euler(0, 0, 0),
    orthographic = true,
    orthographicSize = 1.2,
    farClipPlane = 10,
    nearClipPlane = -10
  },
  FurnitureMake = {
    position = Vector3(0.8, 0.9, -1.5),
    rotation = Quaternion.Euler(7.119995, -28.5, -0.8000488),
    fieldOfView = 61,
    backPosition = Vector3(-1.15, 0.4, 2.08),
    backScale = Vector3(10.4, 4.85, 10)
  },
  PetNamePopUp = {
    position = Vector3(1.28, 1.18, -2.34),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 45,
    backPosition = Vector3(-1.28, 0.6, 2.4),
    backScale = Vector3(6.5, 6.5, 1)
  },
  PicMake = {
    position = Vector3(0.4, 0.1, -0.72),
    rotation = Quaternion.Euler(6.6, -28.2, -0.88),
    fieldOfView = 61,
    backPosition = Vector3(-1.17, -0.28, 2.24),
    backScale = Vector3(4, 4, 4)
  },
  LinkCharacter = {
    orthographic = true,
    orthographicSize = 1,
    farClipPlane = 10,
    nearClipPlane = -10
  },
  PwsFightResult = {
    position = Vector3(1.28, 1.25, -2.34),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 45,
    backPosition = Vector3(-1.16, 0.57, 2.18),
    backScale = Vector3(3, 4.45, 0)
  },
  MiniRODice = {
    position = Vector3(0.15, 0.4, 0),
    rotation = Quaternion.Euler(66.75, 2.6, -8.4),
    orthographic = true,
    orthographicSize = 1.2,
    farClipPlane = 10,
    nearClipPlane = -10
  },
  Default = {
    position = Vector3(0.8, 1, -1.5),
    rotation = Quaternion.Euler(7.12, -28.5, -0.8),
    fieldOfView = 61,
    farClipPlane = 2000,
    nearClipPlane = 0.3
  },
  Hair = {
    position = Vector3(1.23, 1.29, -2.34),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 57
  },
  Eye = {
    position = Vector3(1.23, 1.6, -2.34),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 31
  },
  Lottery = {
    position = Vector3(1.46, 1.19, -2.64),
    rotation = Quaternion.Euler(4.35, -29.3, -1.334),
    fieldOfView = 45,
    backScale = Vector3(10, 5, 1)
  },
  Bricks = {
    position = Vector3(2.19, 0.7, -4.1),
    rotation = Quaternion.Euler(7, -28, 0),
    fieldOfView = 47
  },
  Evidence = {
    position = Vector3(1.28, 0.5, -2.34),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 45
  },
  ShareNew = {
    position = Vector3(2.82, 1.6, -5.17),
    rotation = Quaternion.Euler(7.12, -28.5, 0),
    fieldOfView = 45
  },
  Pve = {
    position = Vector3(1.86, 1.46, -3.41),
    rotation = Quaternion.Euler(7.12, -28.5, -1),
    backPosition = Vector3(-7.51, -1, 13.85),
    backScale = Vector3(11.03, 16.43, 1),
    fieldOfView = 45
  },
  EquipRecommendNew = {
    position = Vector3(0.6, 0.942, -3.42),
    rotation = Quaternion.Euler(0, -10, 0),
    orthographic = true,
    orthographicSize = 1.1,
    backPosition = Vector3(-0.66, 0.8, 2.45),
    backScale = Vector3(2, 2, 1)
  },
  TriplePvp = {
    position = Vector3(1.06, 1.3, -1.93),
    rotation = Quaternion.Euler(7.119996, -28.5, -0.8000793),
    fieldOfView = 50,
    backPosition = Vector3(-0.24, 0.97, 0.98),
    backScale = Vector3(3, 4, 10)
  }
}
autoImport("UIModelCell")
UIModelUtil = class("UIModelUtil")
UIModelUtil.Instance = nil

function UIModelUtil:ctor()
  self:Init()
  UIModelUtil.Instance = self
end

function UIModelUtil:FindGO(name, parent)
  parent = parent or self.gameObject
  return parent ~= nil and Game.GameObjectUtil:DeepFind(parent, name) or nil
end

function UIModelUtil:Init()
  local path = "GUI/pic/Model/UIModelCamera"
  self.gameObject = Game.AssetManager_UI:CreateAsset(path)
  GameObject.DontDestroyOnLoad(self.gameObject)
  self.uiModelMap = {}
  for i = 1, 12 do
    local go = self:FindGO("Model" .. i, self.gameObject)
    local uiModelCell = UIModelCell.new(go, i)
    table.insert(self.uiModelMap, uiModelCell)
  end
end

function UIModelUtil:GetUIModelCell(uiTexture)
  local result
  for i = 1, #self.uiModelMap do
    local cell = self.uiModelMap[i]
    if cell:GetCacheUITexture() == uiTexture and result == nil then
      result = cell
      break
    end
  end
  if not result then
    for i = 1, #self.uiModelMap do
      local cell = self.uiModelMap[i]
      if cell:GetCacheUITexture() == nil then
        result = cell
        break
      end
    end
  end
  return result
end

function UIModelUtil:Reset()
  self:ResetAllTextures()
  if not LuaGameObject.ObjectIsNull(self.gameObject) then
    GameObject.Destroy(self.gameObject)
  end
  self.gameObject = nil
end

function UIModelUtil:ResetAllTextures()
  for i = 1, #self.uiModelMap do
    local cell = self.uiModelMap[i]
    cell:Clear()
  end
end

function UIModelUtil:SetMountModelTexture(uiTexture, mountId, scale, callback, callbackArg)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetRolePartModelTexture(uiTexture, Asset_Role.PartIndex.Mount, mountId, UIModelCameraTrans.Role, scale or GameConfig.UIMountScale.scale, callback, callbackArg)
  end
end

function UIModelUtil:SetRolePartModelTexture(uiTexture, partIndex, id, scale, callback, callbackArg, failCallback, failCallbackArg)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetRolePartModelTexture(uiTexture, partIndex, id, UIModelCameraTrans.Item, scale, callback, callbackArg, failCallback, failCallbackArg)
  end
end

function UIModelUtil:SetPicMakeModelTexture(uiTexture, partIndex, id, scale, callback, callbackArg)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetRolePartModelTexture(uiTexture, partIndex, id, UIModelCameraTrans.PicMake, scale, callback, callbackArg)
  end
end

function UIModelUtil:SetModelPrefabTexture(uiTexture, bodyID, callBack)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetModelPrefabTexture(uiTexture, bodyID, callBack)
  end
end

function UIModelUtil:SetCellTransparent(uiTexture, col)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    cell:SetModelTransparent(col)
  end
end

function UIModelUtil:GetContainerObj(uiTexture)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:GetContainerObj()
  end
end

function UIModelUtil:SetNpcModelTexture(uiTexture, npcid, cameraConfig, callBack)
  local parts = Asset_RoleUtility.CreateNpcRoleParts(npcid)
  if parts == nil then
    parts = Asset_RoleUtility.CreateNpcRoleParts(1001)
  end
  local assetRole = self:SetRoleModelTexture(uiTexture, parts, cameraConfig, nil, true, nil, nil, function(rolePart, arg)
    if callBack then
      callBack(rolePart, arg)
    end
  end, npcid)
  Asset_Role.DestroyPartArray(parts)
  return assetRole
end

function UIModelUtil:SetMonsterModelTexture(uiTexture, monsterid, cameraConfig, setConfigTrans, callBack, autoAdjust, disablePostProcessing)
  local parts = Asset_RoleUtility.CreateMonsterRoleParts(monsterid)
  if parts == nil then
    parts = Asset_RoleUtility.CreateMonsterRoleParts(10001)
  end
  local assetRole = self:SetRoleModelTexture(uiTexture, parts, cameraConfig, nil, true, nil, nil, function(obj)
    local model = obj
    if model ~= nil and setConfigTrans then
      local monsterData = Table_Monster[monsterid]
      if monsterData ~= nil then
        local showPos = monsterData.LoadShowPose
        if showPos and #showPos == 3 then
          model:SetPosition(LuaGeometry.GetTempVector3(showPos[1], showPos[2], showPos[3]))
        end
        model:SetEulerAngleY(monsterData.LoadShowRotate or 0)
        local size = monsterData.LoadShowSize or 1
        model:SetScale(size)
      end
    end
    if callBack then
      callBack(model)
    end
  end, nil, autoAdjust, disablePostProcessing)
  Asset_Role.DestroyPartArray(parts)
  return assetRole
end

function UIModelUtil:SetRoleModelTexture(uiTexture, parts, cameraConfig, scale, isPreviewMount, isStatic, suffixMap, callback, callbackArg, autoAdjust, disablePostProcessing)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetRoleModelTexture(uiTexture, parts, cameraConfig, scale, isPreviewMount, isStatic, suffixMap, callback, callbackArg, autoAdjust, disablePostProcessing)
  end
end

function UIModelUtil:SetFurnitureModelTexture(uiTexture, furnitureSID, cameraConfig, callback)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    cell:SetFurnitureModelTexture(uiTexture, furnitureSID, cameraConfig, function(obj)
      if callback then
        callback(obj)
      end
    end)
  end
end

function UIModelUtil:SetBricksTexture(uiTexture, bricksID, ratation, callBack)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetBricksTexture(uiTexture, bricksID, ratation, callBack)
  end
end

function UIModelUtil:SetHomeMaterialModelTexture(uiTexture, materialSID, cameraConfig, callback)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    cell:SetHomeMaterialModelTexture(uiTexture, materialSID, cameraConfig, function(obj)
      if callback then
        callback(obj)
      end
    end)
  end
end

function UIModelUtil:SetModelTextureByPath(uiTexture, path, resType, callBack)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    return cell:SetModelTextureByPath(uiTexture, path, resType, callBack)
  end
end

function UIModelUtil:ResetTexture(uiTexture)
  for i = 1, #self.uiModelMap do
    local cell = self.uiModelMap[i]
    if cell:GetCacheUITexture() == uiTexture then
      cell:Clear()
      break
    end
  end
end

function UIModelUtil:ChangeBGScale(scale)
  if self.bgRender then
    self.bgRender.transform.localScale = Vector3(scale, scale, scale)
  end
end

function UIModelUtil:ChangeBGMeshRenderer(name, uiTexture)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    cell:ChangeBGMeshRenderer(name)
  end
end

function UIModelUtil:ClearModel(uiTexture)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    cell:ClearModel()
  end
end

function UIModelUtil:SetCellCameraBgColor(uiTexture, col)
  local cell = self:GetUIModelCell(uiTexture)
  if cell then
    cell:SetCameraBgColor(col)
  end
end
